(this["webpackJsonpcolor-music"]=this["webpackJsonpcolor-music"]||[]).push([[0],{13:function(e,t,a){e.exports={settings:"Settings_settings__8hZQ-"}},16:function(e,t,a){e.exports=a(29)},21:function(e,t,a){},22:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),c=a.n(l);a(21),a(22);var i=function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{marginTop:0}},"LIGHT ORGAN"))},u=a(12),o=a.n(u),s=a(6),m={getColors:function(e,t){var a=0,n=0,r=0,l=255/e;switch(t){case"red-blue":a=e<40?e:0,a=e>75&&e<120?e:a,a=e>160&&e<210?e:a,n=e>20&&e<70?e:0,n=e>100&&e<150?e:n,n=e>190&&e<240?e:n,r=e>50&&e<95?e:0,r=e>130&&e<180?e:r,r=e>220?e:r;break;case"blue-green":a=e<30?e:0,a=e>85&&e<110?e:a,a=e>170&&e<200?e:a,n=e>30&&e<60?e:0,n=e>110&&e<140?e:n,n=e>200&&e<230?e:n,r=e>60&&e<85?e:0,r=e>140&&e<170?e:r,r=e>230?e:r;break;default:a=255-e,n=e,r=255-e}return"rgb("+a+","+n+","+r+","+l+")"},getFieldStyle:function(e){switch(e=+e){case 102:return{width:"640px",height:"128px"};case 55:return{width:"320px",height:"320px"};default:return{width:"1024px",height:"576px"}}}},d={setFileAndPlay:function(e,t){e.src=URL.createObjectURL(t),e.load(),e.play()},_data:null,createAnalyser:function(e){if(this._data)return this._data;var t=new AudioContext,a=t.createMediaElementSource(e),n=t.createAnalyser();a.connect(n),n.connect(t.destination),n.fftSize=512;var r=n.frequencyBinCount,l=new Uint8Array(r);return this._data={analyser:n,dataArray:l},this._data}},h=a(4),f=a.n(h),p=a(13),g=a.n(p);var E=function(e){return r.a.createElement("article",{className:g.a.settings},r.a.createElement("legend",null,r.a.createElement("h3",null,"Choose field:")),r.a.createElement("label",null,r.a.createElement("h3",null,"10*2"),r.a.createElement("input",{type:"radio",onChange:function(t){return e.setField(t.target.value)},name:"field",value:"102"})),r.a.createElement("label",null,r.a.createElement("h3",null,"5*5"),r.a.createElement("input",{type:"radio",onChange:function(t){return e.setField(t.target.value)},name:"field",value:"55"})),r.a.createElement("legend",null,r.a.createElement("h3",null,"Choose theme:")),r.a.createElement("label",null,r.a.createElement("h3",null,"Red-blue"),r.a.createElement("input",{type:"radio",onChange:function(t){return e.setTheme(t.target.value)},name:"theme",value:"red-blue"})),r.a.createElement("label",null,r.a.createElement("h3",null,"Blue-green"),r.a.createElement("input",{type:"radio",onChange:function(t){return e.setTheme(t.target.value)},name:"theme",value:"blue-green"})))};var v=function(e){var t=e.setMusic,a=e.audioElRef,n=e.fieldWidth,l=e.setFieldSize,c=e.setTheme,i=e.newData,u=e.theme,o=i.map((function(e,t){var a=m.getColors(e,u);return r.a.createElement("div",{key:t,style:{backgroundColor:a},className:f.a.cell})}));return r.a.createElement("article",null,r.a.createElement("input",{type:"file",accept:"audio/*",onChange:t,className:f.a.input}),r.a.createElement("audio",{ref:a,controls:!0,className:f.a.audio}),r.a.createElement("section",{className:f.a.wrapper},r.a.createElement("article",{className:f.a.container,style:n},o),r.a.createElement(E,{setField:l,setTheme:c})))};var b=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)([]),l=Object(s.a)(a,2),c=l[0],i=l[1],u=Object(n.useState)(""),h=Object(s.a)(u,2),f=h[0],p=h[1],g=Object(n.useState)(""),E=Object(s.a)(g,2),b=E[0],y=E[1],_="55"===f?c.slice(0,25):"102"===f?c.slice(0,20):c.slice(0,144),w=m.getFieldStyle(+f);return r.a.createElement(v,{audioElRef:t,fieldWidth:w,setFieldSize:p,setMusic:function(e){var a,n,r,l,c;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(c=function(){requestAnimationFrame(c),r.getByteFrequencyData(l),i(Array.from(l))},a=e.target.files[0]){u.next=4;break}return u.abrupt("return");case 4:d.setFileAndPlay(t.current,a),n=d.createAnalyser(t.current,a),r=n.analyser,l=n.dataArray,c();case 7:case"end":return u.stop()}}))},setTheme:y,theme:b,newData:_})};var y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(15),w=a(3),F=a(10),C={},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_PLAY_MUSIC":var a=function(e){return Math.floor(Math.random()*e)},n=e.colors.map((function(t){return Object(F.a)({},t,{brightness:Math.random(),color:e.arrayColors[a(e.arrayColors.length-1)]})}));return Object(F.a)({},e,{colors:n,isMusicPlay:!0});default:return e}},O=Object(w.c)({main:A}),j=Object(w.d)(O,Object(w.a)());c.a.render(r.a.createElement(_.a,{store:j},r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(e,t,a){e.exports={wrapper:"FieldGame_wrapper__3sQcg",container:"FieldGame_container__uscdW",audio:"FieldGame_audio__1k6_D",input:"FieldGame_input__2E8nk",block:"FieldGame_block__1BHYD",cell:"FieldGame_cell__16CUM"}}},[[16,1,2]]]);
//# sourceMappingURL=main.c730cfa0.chunk.js.map